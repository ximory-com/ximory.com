<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心沐智康 - AI赋能健康科技 | Ximory Technology</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="description" content="心沐智康致力于以AI赋能个体健康管理，打造以用户为中心的数字健康解决方案">
    <meta name="keywords" content="AI健康评估,数字健康,健康管理,人工智能,心沐智康">
    <style>
        .hero-logo { height: 128px; }
        .nav-logo { height: 48px; }
        .gradient-bg { background: linear-gradient(135deg, #e0f2fe 0%, #f5f5f5 50%, #e8f5e8 100%); }
        .health-assessment { display: none; }
        .health-assessment.active { display: block; }
        .progress-bar { transition: width 0.3s ease; }
        .score-bar { transition: width 1s ease; }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- 导航栏 -->
    <nav class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- LOGO -->
                <div class="flex items-center">
                    <img src="logo_horizontal.png" alt="心沐智康" class="nav-logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="text-xl font-bold text-blue-600" style="display:none;">XIMORY</div>
                </div>
                
                <!-- 桌面端导航菜单 -->
                <div class="hidden md:flex space-x-8">
                    <a href="#" onclick="showHome()" class="text-gray-700 hover:text-blue-600 font-medium">首页</a>
                    <a href="#about" onclick="scrollToSection('about')" class="text-gray-700 hover:text-blue-600 font-medium">关于我们</a>
                    <a href="#services" onclick="scrollToSection('services')" class="text-gray-700 hover:text-blue-600 font-medium">产品与服务</a>
                    <a href="#solutions" onclick="scrollToSection('solutions')" class="text-gray-700 hover:text-blue-600 font-medium">解决方案</a>
                    <a href="#" onclick="showHealthAssessment()" class="text-gray-700 hover:text-blue-600 font-medium">健康评估</a>
                    <a href="#contact" onclick="scrollToSection('contact')" class="text-gray-700 hover:text-blue-600 font-medium">联系我们</a>
                    <a href="https://mzhyi8cdqyg0.manus.space/health-dashboard.html" target="_blank" class="text-gray-700 hover:text-blue-600 font-medium">数据仪表板</a>
                </div>
                
                <!-- 语言切换和移动端菜单 -->
                <div class="flex items-center space-x-4">
                    <button onclick="toggleLanguage()" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-200">
                        <span id="lang-btn">EN</span>
                    </button>
                    <button onclick="toggleMobileMenu()" class="md:hidden p-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- 移动端菜单 -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <div class="flex flex-col space-y-2">
                    <a href="#" onclick="showHome(); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">首页</a>
                    <a href="#about" onclick="scrollToSection('about'); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">关于我们</a>
                    <a href="#services" onclick="scrollToSection('services'); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">产品与服务</a>
                    <a href="#solutions" onclick="scrollToSection('solutions'); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">解决方案</a>
                    <a href="#" onclick="showHealthAssessment(); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">健康评估</a>
                    <a href="#contact" onclick="scrollToSection('contact'); toggleMobileMenu()" class="block px-3 py-2 text-gray-700 hover:text-blue-600">联系我们</a>
                    <a href="https://mzhyi8cdqyg0.manus.space/health-dashboard.html" target="_blank" class="block px-3 py-2 text-gray-700 hover:text-blue-600">数据仪表板</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容 -->
    <div id="main-content">
        <!-- Hero Section -->
        <section class="py-20 text-center">
            <div class="max-w-6xl mx-auto px-4">
                <div class="mb-8">
                    <img src="logo_vertical.jpg" alt="心沐智康" class="hero-logo mx-auto mb-6" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="text-6xl mb-6" style="display:none;">🧠</div>
                </div>
                
                <h1 id="hero-title" class="text-4xl md:text-6xl font-bold text-gray-800 mb-6 leading-tight">
                    用智慧赋能健康<br>让心灵沐浴科技之光
                </h1>
                
                <p id="hero-subtitle" class="text-xl md:text-2xl text-gray-600 mb-4 font-medium">
                    AI 赋能 · 数字健康 · 人本关怀
                </p>
                
                <p id="hero-description" class="text-lg text-gray-600 mb-12 max-w-3xl mx-auto">
                    心沐智康致力于以AI赋能个体健康管理，打造以用户为中心的数字健康解决方案
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button onclick="showHealthAssessment()" class="w-full sm:w-auto bg-gradient-to-r from-blue-600 to-green-600 text-white px-8 py-3 rounded-lg font-medium hover:from-blue-700 hover:to-green-700 transition-all">
                        <span id="assessment-btn">免费健康评估</span>
                    </button>
                    <button onclick="scrollToSection('about')" class="w-full sm:w-auto border-2 border-blue-600 text-blue-600 px-8 py-3 rounded-lg font-medium hover:bg-blue-600 hover:text-white transition-all">
                        <span id="learn-more-btn">了解更多</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- 关于我们 -->
        <section id="about" class="py-20 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <h2 id="about-title" class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">关于我们</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 id="brand-vision-title" class="text-2xl font-semibold text-gray-800 mb-6">品牌愿景</h3>
                        <p id="brand-vision-content" class="text-gray-600 text-lg leading-relaxed mb-8">
                            让智慧与心灵共生，赋能每一个生命真实成长。我们相信健康不仅是身体无恙，更是身心灵的和谐共鸣。
                        </p>
                        
                        <h3 id="core-values-title" class="text-2xl font-semibold text-gray-800 mb-6">核心价值</h3>
                        <div class="space-y-4">
                            <div class="flex items-start space-x-3">
                                <div class="w-2 h-2 bg-blue-600 rounded-full mt-3"></div>
                                <div>
                                    <h4 id="value1-title" class="font-semibold text-gray-800">人本关怀</h4>
                                    <p id="value1-desc" class="text-gray-600">以人为本，关注每个个体的真实需求</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-2 h-2 bg-green-600 rounded-full mt-3"></div>
                                <div>
                                    <h4 id="value2-title" class="font-semibold text-gray-800">AI 赋能</h4>
                                    <p id="value2-desc" class="text-gray-600">运用人工智能技术提升健康管理效率</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <div class="bg-gradient-to-br from-blue-100 to-green-100 rounded-2xl p-8">
                            <div class="text-6xl mb-4">🧠</div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-2">智能健康管理</h3>
                            <p class="text-gray-600">基于AI的个性化健康解决方案</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 产品与服务 -->
        <section id="services" class="py-20 gradient-bg">
            <div class="max-w-6xl mx-auto px-4">
                <h2 id="services-title" class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">产品与服务</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">🤖</div>
                        <h3 id="service1-title" class="text-xl font-semibold text-gray-800 mb-4 text-center">AI健康评估</h3>
                        <p id="service1-desc" class="text-gray-600 text-center">基于人工智能的个性化健康风险评估和预测</p>
                    </div>
                    
                    <div class="bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">📊</div>
                        <h3 id="service2-title" class="text-xl font-semibold text-gray-800 mb-4 text-center">数字健康管理</h3>
                        <p id="service2-desc" class="text-gray-600 text-center">全方位的数字化健康数据管理和分析平台</p>
                    </div>
                    
                    <div class="bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow">
                        <div class="text-4xl mb-4 text-center">📚</div>
                        <h3 id="service3-title" class="text-xl font-semibold text-gray-800 mb-4 text-center">健康教育</h3>
                        <p id="service3-desc" class="text-gray-600 text-center">个性化的健康知识推送和生活方式指导</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 解决方案 -->
        <section id="solutions" class="py-20 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <h2 id="solutions-title" class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">解决方案</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-8">
                        <div class="text-4xl mb-4">👤</div>
                        <h3 id="solution1-title" class="text-2xl font-semibold text-gray-800 mb-4">个人健康管理</h3>
                        <p id="solution1-desc" class="text-gray-600 mb-6">为个人用户提供全面的健康数据收集、分析和管理服务，帮助用户更好地了解和管理自己的健康状况。</p>
                        
                        <ul class="space-y-2">
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution1-feature1" class="text-gray-700">健康数据实时监测</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution1-feature2" class="text-gray-700">个性化健康建议</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution1-feature3" class="text-gray-700">健康风险预警</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-8">
                        <div class="text-4xl mb-4">🏢</div>
                        <h3 id="solution2-title" class="text-2xl font-semibold text-gray-800 mb-4">企业健康服务</h3>
                        <p id="solution2-desc" class="text-gray-600 mb-6">为企业提供员工健康管理解决方案，提升员工健康水平，降低企业医疗成本。</p>
                        
                        <ul class="space-y-2">
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution2-feature1" class="text-gray-700">员工健康体检</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution2-feature2" class="text-gray-700">健康数据分析</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-600">✓</span>
                                <span id="solution2-feature3" class="text-gray-700">健康培训课程</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- 联系我们 -->
        <section id="contact" class="py-20 gradient-bg">
            <div class="max-w-6xl mx-auto px-4">
                <h2 id="contact-title" class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-16">联系我们</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                    <div>
                        <h3 id="contact-info-title" class="text-2xl font-semibold text-gray-800 mb-8">联系方式</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="text-blue-600 text-xl">📧</span>
                                </div>
                                <div>
                                    <h4 id="contact-email-label" class="font-semibold text-gray-800">企业邮箱</h4>
                                    <a href="mailto:contact@ximory.com" class="text-blue-600 hover:underline">contact@ximory.com</a>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="text-green-600 text-xl">🛠️</span>
                                </div>
                                <div>
                                    <h4 id="contact-support-label" class="font-semibold text-gray-800">技术支持</h4>
                                    <a href="mailto:support@ximory.com" class="text-blue-600 hover:underline">support@ximory.com</a>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <span class="text-purple-600 text-xl">👨‍💼</span>
                                </div>
                                <div>
                                    <h4 id="contact-ceo-label" class="font-semibold text-gray-800">创始人邮箱</h4>
                                    <a href="mailto:ceo@ximory.com" class="text-blue-600 hover:underline">ceo@ximory.com</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 id="business-cooperation-title" class="text-2xl font-semibold text-gray-800 mb-6">商务合作咨询</h3>
                        <p id="business-cooperation-desc" class="text-gray-600 mb-8">如果您对我们的产品和服务感兴趣，或希望与我们建立合作关系，请通过以下方式联系我们。</p>
                        
                        <h4 id="cooperation-methods-title" class="text-lg font-semibold text-gray-800 mb-4">合作方式</h4>
                        <ul class="space-y-2">
                            <li class="flex items-center space-x-2">
                                <span class="text-blue-600">•</span>
                                <span id="cooperation-method1" class="text-gray-700">技术合作与集成</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-blue-600">•</span>
                                <span id="cooperation-method2" class="text-gray-700">渠道合作与推广</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-blue-600">•</span>
                                <span id="cooperation-method3" class="text-gray-700">定制化解决方案</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-blue-600">•</span>
                                <span id="cooperation-method4" class="text-gray-700">投资与战略合作</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 健康评估界面 -->
    <div id="health-assessment" class="health-assessment min-h-screen py-20">
        <div class="max-w-4xl mx-auto px-4">
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <!-- 返回按钮 -->
                <div class="mb-6">
                    <button onclick="showHome()" class="flex items-center space-x-2 text-gray-600 hover:text-gray-800">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                        </svg>
                        <span id="back-btn">返回首页</span>
                    </button>
                </div>

                <!-- 标题 -->
                <div class="text-center mb-8">
                    <h1 id="assessment-title" class="text-3xl font-bold text-gray-800 mb-2">AI健康评估</h1>
                    <p id="assessment-subtitle" class="text-gray-600">获得AI驱动的个性化健康洞察</p>
                </div>

                <!-- 进度条 -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-2">
                        <span id="step1-label" class="text-sm font-medium text-blue-600">基本信息</span>
                        <span id="step2-label" class="text-sm font-medium text-gray-400">生活习惯</span>
                        <span id="step3-label" class="text-sm font-medium text-gray-400">评估结果</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div id="progress-bar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 33%"></div>
                    </div>
                </div>

                <!-- 步骤1: 基本信息 -->
                <div id="step1" class="assessment-step">
                    <h2 class="text-xl font-semibold mb-6">
                        <span id="basic-info-title">基本信息</span>
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="age-label">年龄</span>
                            </label>
                            <input type="number" id="age" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="请输入年龄">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="gender-label">性别</span>
                            </label>
                            <select id="gender" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择性别</option>
                                <option value="male">男</option>
                                <option value="female">女</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="height-label">身高 (厘米)</span>
                            </label>
                            <input type="number" id="height" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="请输入身高">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="weight-label">体重 (公斤)</span>
                            </label>
                            <input type="number" id="weight" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="请输入体重">
                        </div>
                    </div>
                </div>

                <!-- 步骤2: 生活习惯 -->
                <div id="step2" class="assessment-step hidden">
                    <h2 class="text-xl font-semibold mb-6">
                        <span id="lifestyle-title">生活习惯</span>
                    </h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="exercise-label">运动频率</span>
                            </label>
                            <select id="exercise" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择频率</option>
                                <option value="daily">每天</option>
                                <option value="weekly">每周</option>
                                <option value="monthly">每月</option>
                                <option value="never">从不</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="sleep-label">睡眠质量</span>
                            </label>
                            <select id="sleep" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择质量</option>
                                <option value="excellent">优秀</option>
                                <option value="good">良好</option>
                                <option value="fair">一般</option>
                                <option value="poor">较差</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="smoking-label">吸烟</span>
                            </label>
                            <select id="smoking" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择</option>
                                <option value="yes">是</option>
                                <option value="no">否</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <span id="drinking-label">饮酒</span>
                            </label>
                            <select id="drinking" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">请选择频率</option>
                                <option value="never">从不</option>
                                <option value="light">偶尔</option>
                                <option value="moderate">适量</option>
                                <option value="heavy">经常</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 步骤3: 评估结果 -->
                <div id="step3" class="assessment-step hidden">
                    <div class="text-center space-y-6">
                        <h2 class="text-2xl font-semibold mb-6">
                            <span id="results-title">您的健康评估结果</span>
                        </h2>
                        
                        <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-8">
                            <div class="text-6xl font-bold mb-4">
                                <span id="health-score" class="text-blue-600">85</span>
                                <span class="text-gray-400 text-3xl">/100</span>
                            </div>
                            
                            <div id="score-level" class="text-2xl font-semibold mb-4 text-blue-600">
                                优秀
                            </div>
                            
                            <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
                                <div id="score-bar" class="score-bar h-4 rounded-full bg-blue-500" style="width: 85%"></div>
                            </div>

                            <div class="text-gray-600 mb-6">
                                <span id="recommendations-intro">根据您的回答，以下是一些建议：</span>
                            </div>

                            <div id="recommendations" class="text-left space-y-2 text-sm">
                                <!-- 建议内容将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 按钮 -->
                <div class="flex justify-between mt-8">
                    <button id="prev-btn" onclick="prevStep()" class="px-6 py-3 bg-gray-500 text-white rounded-lg font-medium hover:bg-gray-600 hidden">
                        <span id="prev-text">上一步</span>
                    </button>

                    <button id="next-btn" onclick="nextStep()" class="px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 ml-auto">
                        <span id="next-text">下一步</span>
                    </button>

                    <button id="restart-btn" onclick="restartAssessment()" class="px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 hidden">
                        <span id="restart-text">重新评估</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <div class="mb-4">
                <span class="text-2xl font-bold">XIMORY</span>
            </div>
            <p class="text-gray-400">
                <span id="footer-text">© 2025 心沐智康（杭州）科技有限公司. 保留所有权利.</span>
            </p>
        </div>
    </footer>

    <script>
        // 全局变量
        let currentStep = 1;
        let isEnglish = false;
        let healthData = {};
        
        // API基础URL - 指向后端服务
        const API_BASE_URL = 'https://mzhyi8cdqyg0.manus.space/api';

        // 页面加载后初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成，初始化JavaScript功能');
            updateStepDisplay();
        });

        // 移动端菜单切换
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) {
                mobileMenu.classList.toggle('hidden');
            }
        }

        // 页面切换
        function showHome() {
            const mainContent = document.getElementById('main-content');
            const healthAssessment = document.getElementById('health-assessment');
            if (mainContent && healthAssessment) {
                mainContent.style.display = 'block';
                healthAssessment.classList.remove('active');
            }
        }

        function showHealthAssessment() {
            const mainContent = document.getElementById('main-content');
            const healthAssessment = document.getElementById('health-assessment');
            if (mainContent && healthAssessment) {
                mainContent.style.display = 'none';
                healthAssessment.classList.add('active');
                // 重置评估状态
                currentStep = 1;
                healthData = {};
                updateStepDisplay();
            }
        }

        // 平滑滚动
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // 健康评估步骤控制
        function nextStep() {
            if (currentStep === 1) {
                // 验证第一步数据
                const age = document.getElementById('age').value;
                const gender = document.getElementById('gender').value;
                const height = document.getElementById('height').value;
                const weight = document.getElementById('weight').value;

                if (!age || !gender || !height || !weight) {
                    alert(isEnglish ? 'Please fill in all fields' : '请填写所有字段');
                    return;
                }

                healthData.age = parseInt(age);
                healthData.gender = gender;
                healthData.height = parseInt(height);
                healthData.weight = parseInt(weight);

                currentStep = 2;
                updateStepDisplay();
            } else if (currentStep === 2) {
                // 验证第二步数据并提交评估
                const exercise = document.getElementById('exercise').value;
                const sleep = document.getElementById('sleep').value;
                const smoking = document.getElementById('smoking').value;
                const drinking = document.getElementById('drinking').value;

                if (!exercise || !sleep || !smoking || !drinking) {
                    alert(isEnglish ? 'Please fill in all fields' : '请填写所有字段');
                    return;
                }

                healthData.exercise = exercise;
                healthData.sleep = sleep;
                healthData.smoking = smoking;
                healthData.drinking = drinking;

                // 提交健康评估
                submitHealthAssessment();
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function restartAssessment() {
            currentStep = 1;
            healthData = {};
            updateStepDisplay();
            // 清空表单
            document.getElementById('age').value = '';
            document.getElementById('gender').value = '';
            document.getElementById('height').value = '';
            document.getElementById('weight').value = '';
            document.getElementById('exercise').value = '';
            document.getElementById('sleep').value = '';
            document.getElementById('smoking').value = '';
            document.getElementById('drinking').value = '';
        }

        function updateStepDisplay() {
            // 隐藏所有步骤
            document.querySelectorAll('.assessment-step').forEach(step => {
                step.classList.add('hidden');
            });

            // 显示当前步骤
            const currentStepElement = document.getElementById(`step${currentStep}`);
            if (currentStepElement) {
                currentStepElement.classList.remove('hidden');
            }

            // 更新进度条
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) {
                progressBar.style.width = `${(currentStep / 3) * 100}%`;
            }

            // 更新步骤标签颜色
            document.querySelectorAll('[id^="step"][id$="-label"]').forEach((label, index) => {
                if (index + 1 <= currentStep) {
                    label.classList.remove('text-gray-400');
                    label.classList.add('text-blue-600');
                } else {
                    label.classList.remove('text-blue-600');
                    label.classList.add('text-gray-400');
                }
            });

            // 更新按钮显示
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const restartBtn = document.getElementById('restart-btn');

            if (prevBtn && nextBtn && restartBtn) {
                if (currentStep === 1) {
                    prevBtn.classList.add('hidden');
                    nextBtn.classList.remove('hidden');
                    restartBtn.classList.add('hidden');
                    document.getElementById('next-text').textContent = isEnglish ? 'Next' : '下一步';
                } else if (currentStep === 2) {
                    prevBtn.classList.remove('hidden');
                    nextBtn.classList.remove('hidden');
                    restartBtn.classList.add('hidden');
                    document.getElementById('next-text').textContent = isEnglish ? 'Get Results' : '获取结果';
                } else if (currentStep === 3) {
                    prevBtn.classList.add('hidden');
                    nextBtn.classList.add('hidden');
                    restartBtn.classList.remove('hidden');
                }
            }
        }

        // 提交健康评估
        async function submitHealthAssessment() {
            try {
                showLoading();
                
                const response = await fetch(`${API_BASE_URL}/health/assessment`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(healthData)
                });

                if (!response.ok) {
                    throw new Error('评估请求失败');
                }

                const result = await response.json();
                showResults(result);
                currentStep = 3;
                updateStepDisplay();
            } catch (error) {
                console.error('评估失败:', error);
                // 如果API调用失败，使用本地计算
                const localResult = calculateLocalHealthScore();
                showResults(localResult);
                currentStep = 3;
                updateStepDisplay();
            } finally {
                hideLoading();
            }
        }

        // 本地健康评分计算（备用方案）
        function calculateLocalHealthScore() {
            let score = 70; // 基础分数

            // 年龄因素
            if (healthData.age < 30) score += 10;
            else if (healthData.age > 65) score -= 10;

            // BMI计算
            const bmi = healthData.weight / Math.pow(healthData.height / 100, 2);
            if (bmi >= 18.5 && bmi <= 24.9) score += 5;
            else if (bmi < 18.5 || bmi > 30) score -= 10;

            // 运动习惯
            if (healthData.exercise === 'daily') score += 15;
            else if (healthData.exercise === 'weekly') score += 10;
            else if (healthData.exercise === 'monthly') score += 5;
            else score -= 5;

            // 睡眠质量
            if (healthData.sleep === 'excellent') score += 10;
            else if (healthData.sleep === 'good') score += 5;
            else if (healthData.sleep === 'poor') score -= 10;

            // 吸烟
            if (healthData.smoking === 'yes') score -= 15;

            // 饮酒
            if (healthData.drinking === 'heavy') score -= 10;
            else if (healthData.drinking === 'moderate') score -= 5;

            score = Math.max(0, Math.min(100, score));

            // 生成建议
            const recommendations = [];
            if (score >= 80) {
                recommendations.push({
                    type: 'success',
                    title: '健康状况优秀',
                    content: '您的健康状况非常好，请继续保持良好的生活习惯！'
                });
            }
            if (score < 60) {
                recommendations.push({
                    type: 'warning',
                    title: '健康提醒',
                    content: '建议增加体育活动并改善睡眠习惯，定期进行健康检查。'
                });
            }
            if (healthData.smoking === 'yes') {
                recommendations.push({
                    type: 'danger',
                    title: '戒烟建议',
                    content: '吸烟对健康有严重危害，强烈建议戒烟以改善健康状况。'
                });
            }
            if (healthData.exercise === 'never') {
                recommendations.push({
                    type: 'info',
                    title: '运动建议',
                    content: '建议每周至少进行150分钟中等强度运动，如快走、游泳等。'
                });
            }

            return {
                health_score: score,
                bmi: bmi.toFixed(1),
                risk_level: score >= 80 ? 'excellent' : score >= 60 ? 'good' : score >= 40 ? 'fair' : 'poor',
                recommendations: recommendations
            };
        }

        // 显示结果
        function showResults(result) {
            document.getElementById('health-score').textContent = result.health_score;
            
            // 更新评分条颜色
            const scoreBar = document.getElementById('score-bar');
            const scoreLevel = document.getElementById('score-level');
            
            if (scoreBar) {
                scoreBar.style.width = result.health_score + '%';
                scoreBar.className = `h-4 rounded-full transition-all duration-500 ${getScoreColor(result.health_score)}`;
            }
            
            if (scoreLevel) {
                scoreLevel.textContent = getRiskLevelText(result.risk_level);
                scoreLevel.className = `text-2xl font-semibold mb-4 ${getScoreTextColor(result.health_score)}`;
            }
            
            // 显示建议
            const recommendationsHtml = result.recommendations.map(rec => {
                const bgColor = rec.type === 'success' ? 'bg-green-50 border-green-400' :
                               rec.type === 'warning' ? 'bg-yellow-50 border-yellow-400' :
                               rec.type === 'danger' ? 'bg-red-50 border-red-400' :
                               'bg-blue-50 border-blue-400';
                const textColor = rec.type === 'success' ? 'text-green-700' :
                                 rec.type === 'warning' ? 'text-yellow-700' :
                                 rec.type === 'danger' ? 'text-red-700' :
                                 'text-blue-700';
                
                return `<div class="${bgColor} border-l-4 p-4 mb-3">
                    <h4 class="${textColor} font-semibold">${rec.title}</h4>
                    <p class="${textColor}">${rec.content}</p>
                </div>`;
            }).join('');
            
            const recommendationsElement = document.getElementById('recommendations');
            if (recommendationsElement) {
                recommendationsElement.innerHTML = recommendationsHtml;
            }
        }

        // 获取风险等级文本
        function getRiskLevelText(level) {
            switch (level) {
                case 'excellent': return '优秀';
                case 'good': return '良好';
                case 'fair': return '一般';
                case 'poor': return '需改善';
                default: return '未知';
            }
        }

        // 获取评分颜色
        function getScoreColor(score) {
            if (score >= 80) return 'bg-green-500';
            if (score >= 60) return 'bg-blue-500';
            if (score >= 40) return 'bg-yellow-500';
            return 'bg-red-500';
        }

        // 获取评分文字颜色
        function getScoreTextColor(score) {
            if (score >= 80) return 'text-green-600';
            if (score >= 60) return 'text-blue-600';
            if (score >= 40) return 'text-yellow-600';
            return 'text-red-600';
        }

        // 显示加载状态
        function showLoading() {
            const nextBtn = document.getElementById('next-btn');
            if (nextBtn) {
                nextBtn.disabled = true;
                nextBtn.innerHTML = '<span>评估中...</span>';
            }
        }

        // 隐藏加载状态
        function hideLoading() {
            const nextBtn = document.getElementById('next-btn');
            if (nextBtn) {
                nextBtn.disabled = false;
                nextBtn.innerHTML = '<span id="next-text">获取结果</span>';
            }
        }

        // 语言切换
        function toggleLanguage() {
            isEnglish = !isEnglish;
            updateLanguage();
        }

        function updateLanguage() {
            const langBtn = document.getElementById('lang-btn');
            if (langBtn) {
                langBtn.textContent = isEnglish ? '中文' : 'EN';
            }

            // 更新所有文本内容
            const translations = {
                'hero-title': isEnglish ? 'Empowering Health with Intelligence<br>Bathing Hearts in the Light of Technology' : '用智慧赋能健康<br>让心灵沐浴科技之光',
                'hero-subtitle': isEnglish ? 'AI Empowerment · Digital Health · Human Care' : 'AI 赋能 · 数字健康 · 人本关怀',
                'hero-description': isEnglish ? 'Ximory is committed to empowering individual health management with AI, creating user-centered digital health solutions' : '心沐智康致力于以AI赋能个体健康管理，打造以用户为中心的数字健康解决方案',
                'assessment-btn': isEnglish ? 'Free Health Assessment' : '免费健康评估',
                'learn-more-btn': isEnglish ? 'Learn More' : '了解更多'
            };

            // 更新所有翻译
            Object.keys(translations).forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.innerHTML = translations[id];
                }
            });
        }
    </script>
</body>
</html>

